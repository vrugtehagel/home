(()=>{function e(){const e=new Date,t=e.getHours(),s=e.getMinutes(),o=Math.abs((60*t+s)/720-1);document.body.style.setProperty("--time",o),document.body.classList.toggle("dark",o>=.6)}e(),setInterval(e,6e4)})(),(()=>{let e=0;const t=document.getElementById("cave-entrance"),s=()=>{const{offsetTop:s,offsetHeight:o}=t,n=s+o-1.2*window.innerHeight,r=(window.scrollY-n)/window.innerHeight,c=Math.max(0,Math.min(1,r));t.style.setProperty("--size",c),e=0};s(),window.addEventListener("scroll",()=>{e||(e=requestAnimationFrame(s))})})(),(()=>{const e=document.getElementById("contact"),t=document.querySelector("#letter button"),s=document.querySelector("#letter textarea");t.addEventListener("click",()=>{const t=s.value;t&&(fetch("php/send-message.php",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"name=anon&message="+t}),e.classList.add("sending"),setTimeout(()=>s.value="",1e3),setTimeout(()=>e.classList.remove("sending"),3500))})})(),document.getElementById("email").textContent="vrugtehagel@gmail.com",(()=>{const e=document.getElementById("posters").children,t=document.getElementById("wall-of-fame"),s=document.querySelector("#wall-of-fame article");let o=-1;const n=()=>{const n=s.querySelector(".poster-content");t.classList.remove("poster-open"),n.classList.remove("scrolling"),document.body.classList.remove("no-scroll"),clearTimeout(o),o=setTimeout(()=>{t.classList.add("ready");for(const t of e)t.classList.remove("selected")},500)};for(const o of e)o.addEventListener("click",()=>{if(!t.classList.contains("ready"))return;event.stopPropagation();const e=o.dataset.project,r=o.querySelector("template"),c=o.getBoundingClientRect(),l=c.width,a=c.height,d=(c.top||c.x)+a/2,i=(c.left||c.y)+l/2;s.style.setProperty("--width",l+"px"),s.style.setProperty("--height",a+"px"),s.style.setProperty("--top",d+"px"),s.style.setProperty("--left",i+"px"),document.body.classList.add("no-scroll"),s.replaceChildren(),s.setAttribute("data-project",e),s.appendChild(r.content.cloneNode(!0)),o.classList.add("selected"),s.querySelector(".back").addEventListener("click",n);const m=s.querySelector(".poster-content");m.addEventListener("scroll",e=>{const t=m.scrollTop;m.classList.add("scrolling"),m.style.setProperty("--scroll",t+"px")}),m.style.setProperty("--scroll","0px"),m.scrollTo(0,0),requestAnimationFrame(()=>{t.classList.remove("ready"),requestAnimationFrame(()=>{t.classList.add("poster-open");const e=o.offsetWidth,n=o.offsetHeight;s.style.setProperty("--width",e+"px"),s.style.setProperty("--height",n+"px")})})});document.body.addEventListener("click",e=>{s.contains(e.target)||t.classList.contains("poster-open")&&n()})})();
